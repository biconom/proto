# Сервис: PaymentDestinationService

## 1. Описание

**`PaymentDestinationService`** — это клиентский сервис для управления "адресной книгой" пользователя. Он позволяет управлять **переиспользуемыми реквизитами получателей платежей** (например, адресами кошельков), которые хранятся в виде записей `PaymentDestination`. Сервис предоставляет полный набор методов для создания, просмотра и изменения этих записей.

## 2. Описание методов (RPC)

### `rpc Get(biconom.types.PaymentInstrument) returns (biconom.types.PaymentDestination)`
- **Назначение**: Получить полную информацию о конкретном сохраненном назначении по его реквизитам.
- **Использование**: Полезно для просмотра или редактирования одной конкретной записи.
- **Параметры**: Принимает `biconom.types.PaymentInstrument` в качестве естественного ключа для поиска.

### `rpc List(ListRequest) returns (biconom.types.PaymentDestination.List)`
- **Назначение**: Получить отфильтрованный список сохраненных назначений платежей.
- **Параметры `ListRequest`**:
    - `include_archived`: Флаг для включения в выборку архивных записей. По умолчанию (`false`) возвращаются только активные. Если `true` — в результат добавляются и архивные.
    - `repeated blockchain_formats`: Фильтр по форматам адресов блокчейна. Если поле заполнено, в результате будут только записи с указанными форматами.
- **Логика фильтрации**:
-   Если `include_archived` не указан (или `false`), сервис вернет только активные записи. Если `true` - вернет и активные, и архивные.
-   Все указанные фильтры комбинируются по логическому "И".
-   **Ответ**: Содержит отфильтрованный список `biconom.types.PaymentDestination`.

### `rpc Create(CreateRequest) returns (biconom.types.Confirmation)`
- **Назначение**: Создать новое назначение платежа в адресной книге пользователя. Новой записи автоматически присваивается статус `ACTIVE`.
- **Параметры `CreateRequest`**:
    - `name`: Пользовательское имя для записи (например, "Мой кошелек для BNB").
    - `instrument`: Полные реквизиты (`PaymentInstrument`) для нового назначения. Бэкенд проверит валидность данных перед сохранением.

### `rpc UpdateName(UpdateNameRequest) returns (biconom.types.PaymentDestination)`
- **Назначение**: Изменить пользовательское имя (`name`) существующей записи.
- **Параметры `UpdateNameRequest`**:
    - `instrument`: Реквизиты записи, которую нужно обновить.
    - `name`: Новое имя.

### `rpc Archive(biconom.types.PaymentInstrument) returns (biconom.types.PaymentDestination)`
- **Назначение**: Архивировать существующее назначение. Этот метод выполняет "мягкое удаление", меняя флаг `is_active` на `false`. После этого она перестанет отображаться в списке по умолчанию.
- **Параметры**: Принимает `biconom.types.PaymentInstrument` в качестве ключа для поиска записи, которую нужно заархивировать.

### `rpc Activate(biconom.types.PaymentInstrument) returns (biconom.types.PaymentDestination)`
- **Назначение**: Активировать (восстановить из архива) существующее назначение, меняя его флаг `is_active` на `true`.
- **Параметры**: Принимает `biconom.types.PaymentInstrument` в качестве ключа для поиска записи, которую нужно активировать.
