# Модель: Currency

## 1. Описание

**`Currency`** — это фундаментальная справочная модель, представляющая собой финансовую единицу, такую как криптовалюта или фиат. Она содержит основные, статичные атрибуты валюты, которые не зависят от способа ее обработки (платежного шлюза).

## 2. Назначение и решаемые задачи

Основная цель — создать единый реестр всех валют, доступных в системе, и определить их базовые характеристики.

### Ключевые задачи:
- **Идентификация**: Предоставляет уникальные `id` и `symbol` для каждой валюты.
- **Классификация**: Поле `kind` (`Kind.Id`) разделяет валюты на фундаментальные виды (криптовалюта, фиат, бонусные баллы), что позволяет применять к ним разную базовую логику.
- **Управление состоянием**: Поле `status` (`Status.Id`) позволяет управлять жизненным циклом валюты, делая ее активной, недоступной или переводя в режим обслуживания.
- **Точность расчетов**: Поле `precision` определяет количество знаков после запятой, что критически важно для финансовых операций и корректного отображения балансов.

## 3. Ключевые поля и концепции

- `symbol`: Уникальный строковый тикер (например, "BTC", "USD"). Является основным бизнес-идентификатором.
- `kind`: Определяет вид валюты (`CRYPTO`, `FIAT`, `POINT`). Это позволяет системе на высоком уровне понимать, с чем она работает.
- `status`: Определяет операционный статус валюты (`ACTIVE`, `MAINTENANCE` и т.д.).
- `precision`: Целое число, указывающее на точность. Например, для BTC это 8, для USDT — 6.

### Структура `Kind` и `Status`
Для гибкости и возможности будущего расширения, `Kind` и `Status` реализованы как `message`, содержащие внутри `enum Id`. Это позволяет в будущем добавить в них дополнительные атрибуты (например, `Status` может получить поле `reason` для объяснения причины технического обслуживания), не ломая обратную совместимость.

## 4. Сценарии использования (кейсы)

- **Добавление новой валюты**: Администратор добавляет в справочник новую запись `Currency`:
  - `name`: "Tether"
  - `symbol`: "USDT"
  - `precision`: 6
  - `kind`: `Kind.Id.CRYPTO`
  - `status`: `Status.Id.ACTIVE`
- **Технические работы**: Если для валюты требуется обновление, администратор меняет ее `status` на `Status.Id.MAINTENANCE`. Система, видя этот статус, временно блокирует все операции с этой валютой.

## 5. Связи с другими моделями

- **`CurrencyPolicy`**: `Currency` может быть связана с политикой, которая определяет общие правила для нее.
- **Модель настроек платежного шлюза** (гипотетическая `PaymentGatewaySetting`): Эта модель будет связывать `Currency` с конкретным платежным шлюзом (`PaymentGateway`) и политикой (`Policy`), определяя операционные детали (комиссии, лимиты, адреса контрактов и т.д.) для конкретного способа ввода/вывода.
