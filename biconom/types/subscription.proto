syntax = "proto3";

package biconom.types;

import "google/protobuf/timestamp.proto";
import "biconom/types/license.proto";

// Subscription объединяет продукт и список доступных для него тарифных планов.
message Subscription {
    message List {
        repeated Subscription items = 1;
    }
    // State описывает коммерческое состояние подписки (биллинг).
    message State {
        enum Status {
            UNSPECIFIED = 0;
            INACTIVE = 1; // Начальное состояние (подписка никогда не приобреталась)
            ACTIVE = 2;   // Оплачена и активна
            PAST_DUE = 3; // Оплата не прошла, ожидается повтор
            CANCELED = 4; // Подписка завершена или отменена
            UNPAID = 5;   // Не оплачена, услуги остановлены
        }
        Status status = 1;
        optional biconom.types.License.Plan plan = 2; // Тарифный план, по которому оформлена подписка
        optional google.protobuf.Timestamp next_billing_at = 3; // Дата следующего списания
    }

    biconom.types.License license = 1;
    repeated biconom.types.License.Plan plans = 2;
}