# Модель: PaymentInstrument

## 1. Описание

**`PaymentInstrument`** — это специализированная, встраиваемая модель, которая содержит конкретные технические реквизиты для одного платежного инструмента, такие как адрес криптовалютного кошелька или номер банковского счета.

Эта модель не является самостоятельной сущностью, а используется как составная часть в других, более общих моделях, например, в `PaymentDetails`.

## 2. Назначение и решаемые задачи

Основная цель `PaymentInstrument` — отделить общие метаданные платежного реквизита (например, его пользовательское имя или статус, которые хранятся в `PaymentDetails`) от его конкретных, технических деталей.

### Ключевые задачи:
- **Строгая типизация реквизитов**: Использование `oneof details` гарантирует, что каждый экземпляр `PaymentInstrument` может содержать реквизиты только одного, строго определенного типа (например, `CryptoWallet`).
- **Инкапсуляция**: Все технические детали, необходимые для работы с конкретным платежным инструментом, собраны в одном месте.
- **Расширяемость**: Архитектура позволяет легко добавлять поддержку новых типов платежных инструментов (например, банковских счетов) в будущем, просто добавив новое сообщение в `oneof` и не затрагивая родительские модели.

## 3. Ключевые поля и концепции

- `oneof details`: Ключевая конструкция, которая обеспечивает полиморфизм. Она может содержать только один из определенных типов реквизитов.
  - `crypto_wallet`: Структура для хранения реквизитов криптовалютного кошелька.
    - `network_type`: Перечисление (`enum`), которое точно определяет тип сети кошелька (например, `EVM_HEX` для Ethereum-совместимых адресов). Это поле критически важно для правильной валидации и маршрутизации транзакций.
    - `address`: Адрес кошелька в виде строки.

## 4. Сценарии использования

- **Добавление нового кошелька**: Когда пользователь сохраняет новый криптовалютный кошелек, создается экземпляр `PaymentDetails`. Его поле `instrument` будет содержать `PaymentInstrument`, у которого `oneof details` установлен в `crypto_wallet` с соответствующим типом сети и адресом.
- **Добавление нового типа инструмента**: Если в будущем потребуется добавить поддержку банковских счетов, в `PaymentInstrument` будет добавлено новое сообщение `BankAccount` и оно будет включено в `oneof details`. При этом модель `PaymentDetails` останется без изменений.

## 5. Связи с другими моделями

- **`PaymentDetails`**: `PaymentInstrument` **является встраиваемой частью** модели `PaymentDetails`. Поле `instrument` в `PaymentDetails` имеет тип `PaymentInstrument`, инкапсулируя в себе все технические реквизиты.
