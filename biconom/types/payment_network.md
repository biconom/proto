# Модель: PaymentNetwork

## 1. Описание

**`PaymentNetwork`** — это справочная модель, описывающая одну платежную сеть или расчетную схему. Примерами могут служить блокчейны (Tron, Ethereum), банковские системы (SEPA, SWIFT) или внешние платежные системы (PayPal).

## 2. Назначение и решаемые задачи

Основная цель модели — создать единый реестр всех доступных в системе платежных сетей, что позволяет централизованно управлять ими и их свойствами.

### Ключевые задачи:
- **Каталогизация**: Предоставляет уникальные идентификаторы (`id`, `code`) и человекочитаемое имя (`name`) для каждой сети.
- **Типизация**: Классифицирует сети по их типу (`network_type`), например, `BLOCKCHAIN`, `BANK`, `PAYMENT_SYSTEM`. Это позволяет применять общую логику к группам сетей.
- **Управление жизненным циклом**: Поле `status` позволяет управлять операционной доступностью всей сети (например, временно приостановить работу из-за технических проблем).
- **Основа для связей**: Служит базовой сущностью для определения, какие валюты поддерживаются в какой сети (через модель `PaymentGatewayCurrency`).

## 3. Ключевые поля и концепции

- `id`: Глобальный числовой идентификатор.
- `code`: Уникальный строковый код (например, "tron", "ethereum", "sepa"). Используется как стабильный идентификатор в коде и конфигурациях.
- `name`: Человекочитаемое имя для отображения пользователям (например, "TRON Network", "Ethereum Mainnet").
- `status`: Операционный статус сети (`ACTIVE`, `INACTIVE`, `SUSPENDED`). Позволяет включать/отключать всю сеть для операций.
- `network_type`: Тип сети (`BLOCKCHAIN`, `BANK` и т.д.). Помогает бэкенду применять специфическую логику, например, правила валидации адресов для блокчейнов или форматы реквизитов для банков.

## 4. Сценарии использования (кейсы)

- **Добавление новой сети**: Администратор добавляет в систему поддержку сети Polygon, создавая запись `PaymentNetwork` с полями: `code="polygon"`, `name="Polygon"`, `network_type=NETWORK_TYPE_BLOCKCHAIN`, `status=STATUS_ACTIVE`.
- **Временное отключение**: Во время обновления сети Ethereum администратор может изменить статус соответствующей записи `PaymentNetwork` на `STATUS_SUSPENDED`. Все операции ввода/вывода через эту сеть будут временно заблокированы на уровне системы.

## 5. Связи с другими моделями

- **`PaymentGatewayCurrency`**: `PaymentNetwork` **используется** в этой модели для указания, какая сеть (`payment_gateway_id`, который ссылается на `PaymentNetwork.id`) поддерживает какую валюту (`currency_id`).
- **`PaymentGatewayWalletCurrency`**: Аналогично, `PaymentNetwork` **является частью** составного ключа, определяющего детальные настройки (лимиты, комиссии) для операций ввода/вывода.
- **`PaymentInstrument`**: Хотя прямой связи нет, `PaymentNetwork` предоставляет контекст для реквизитов в `PaymentInstrument`. Например, `CryptoWallet` с адресом `0x...` будет логически связан с `PaymentNetwork`, у которого `code="ethereum"` или `code="bsc"`.