# Модель: PaymentDetailsRegistry

## 1. Описание

**`PaymentDetailsRegistry`** — это модель, представляющая собой "белый список" или реестр платежных реквизитов, которые пользователь сохранил для многократного использования. Модель также включает в себя систему лимитов, которая определяет, сколько реквизитов может хранить пользователь.

## 2. Назначение и решаемые задачи

Основная цель — предоставить пользователю безопасный и удобный способ управления своими платежными реквизитами и дать администраторам возможность контролировать количество сохраненных данных.

### Ключевые задачи:
- **Хранение реквизитов**: Содержит список (`entries`) всех сохраненных пользователем `PaymentDetails`.
- **Управление лимитами**: Определяет правила и ограничения на количество хранимых реквизитов.

## 3. Ключевые поля и концепции

- `entries`: Список сохраненных платежных реквизитов, каждый из которых является экземпляром `PaymentDetails`.
- `limit`: Опциональное поле, содержащее правила лимитов.

### Концепция опциональных лимитов

Поле `limit` и его вложенные поля (`total`, `per_type`) являются опциональными (`optional`). Это ключевая особенность, которая интерпретируется следующим образом:

- **Если поле `limit` или любое из его вложенных полей отсутствует (пусто), это означает, что соответствующее ограничение не применяется.**

Например:
- Если `limit` не задан, пользователь может хранить неограниченное количество любых реквизитов.
- Если `limit.total` не задан, но заданы лимиты `per_type`, то нет общего ограничения, но есть ограничения по каждому типу.
- Если `limit.total` задан, а `per_type` — нет, то действует только общее ограничение на количество записей.

## 4. Сценарии использования

- **VIP-пользователь**: Для такого пользователя поле `limit` может быть не задано, что дает ему возможность сохранять любое количество платежных реквизитов.
- **Стандартный пользователь**: `limit` может быть установлен со значением `total = 5` и `per_type` лимитом в `value = 2` для `CRYPTO_WALLET`. Это означает, что пользователь может сохранить не более 5 реквизитов в сумме и не более 2 из них могут быть криптокошельками.

## 5. Связи с другими моделями

- **`PaymentDetails`**: `PaymentDetailsRegistry` **содержит** список `PaymentDetails`.
- **`UserService`**: Модель `PaymentDetailsRegistry` **используется** в `UserView` для предоставления клиенту информации о его реквизитах и лимитах.
