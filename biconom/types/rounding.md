# Модель: Rounding

## 1. Описание

**`Rounding`** — это встраиваемая модель, которая определяет полный, недвусмысленный набор правил для математического округления. Она поддерживает округление как до знаков после запятой (положительная `digits`), так и до разрядов до запятой (отрицательная `digits`).

## 2. Назначение и решаемые задачи

Основная цель — централизовать и унифицировать логику округления, которая будет применяться к результатам расчетов на этапе постобработки.

### Ключевые задачи:
- **Определение стратегии**: Указывает, какой именно математический алгоритм округления использовать.
- **Определение количества знаков**: Указывает, до какого количества знаков следует округлять.

## 3. Ключевые поля и концепции

- `strategy`: Поле типа `Rounding.Strategy` (`enum`), которое определяет математическую стратегию округления.
- `digits`: **Знаковое** целое число (`sint32`), определяющее количество знаков:
  - **Положительное** (`2`): Округление до знаков *после* запятой (до сотых).
  - **Нулевое** (`0`): Округление до целого числа.
  - **Отрицательное** (`-2`): Округление до знаков *до* запятой (до сотен).

### Вложенный Enum: `Rounding.Strategy`
- **`UNSPECIFIED`**: Стратегия не указана. Будет использована стратегия по умолчанию (`TO_ZERO`).

- **`MIDPOINT_NEAREST_EVEN`**: Округление к ближайшему чётному. Также известно как "Банковское округление".
  - `6.5` -> `6`
  - `7.5` -> `8`

- **`MIDPOINT_AWAY_FROM_ZERO`**: Округление половины к числу, которое дальше от нуля.
  - `6.4` -> `6`
  - `6.5` -> `7`
  - `-6.5` -> `-7`

- **`MIDPOINT_TOWARD_ZERO`**: Округление половины к числу, которое ближе к нулю.
  - `6.4` -> `6`
  - `6.5` -> `6`
  - `-6.5` -> `-6`

- **`TO_ZERO`**: Округление всегда к нулю (отбрасывание дробной части).
  - `-6.8` -> `-6`
  - `6.8` -> `6`

- **`AWAY_FROM_ZERO`**: Округление всегда от нуля.
  - `-6.8` -> `-7`
  - `6.8` -> `7`

- **`TO_NEGATIVE_INFINITY`**: Округление всегда к минус бесконечности ("вниз" или "к полу").
  - `6.8` -> `6`
  - `-6.8` -> `-7`

- **`TO_POSITIVE_INFINITY`**: Округление всегда к плюс бесконечности ("вверх" или "к потолку").
  - `6.8` -> `7`
  - `-6.8` -> `-6`

## 4. Сценарии использования (кейсы)

- **Округление до центов**: `{ strategy: MIDPOINT_AWAY_FROM_ZERO, digits: 2 }` (123.456 -> 123.46)
- **Отбрасывание дробной части**: `{ strategy: TO_ZERO, digits: 0 }` (123.456 -> 123)
- **Округление до ближайшей сотни**: `{ strategy: MIDPOINT_AWAY_FROM_ZERO, digits: -2 }` (12345 -> 12300)
- **Округление до ближайших 10 долларов (вверх для положительных)**: `{ strategy: AWAY_FROM_ZERO, digits: -1 }` (123 -> 130)

## 5. Связи с другими моделями

- **`Calculation.PostProcessing`**: `PostProcessing` **использует** `Rounding` для определения правил округления.
