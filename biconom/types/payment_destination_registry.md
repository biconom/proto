# Модель: PaymentDestinationRegistry

## 1. Описание

**`PaymentDestinationRegistry`** — это модель, представляющая собой "адресную книгу" или реестр назначений платежей (`PaymentDestination`), которые пользователь сохранил для многократного использования. Модель также включает в себя систему лимитов, которая определяет, сколько записей может хранить пользователь.

## 2. Назначение и решаемые задачи

Основная цель — предоставить пользователю безопасный и удобный способ управления своими назначениями платежей и дать администраторам возможность контролировать количество сохраненных данных.

### Ключевые задачи:
- **Хранение назначений**: Содержит список (`entries`) всех сохраненных пользователем `PaymentDestination`.
- **Управление лимитами**: Определяет правила и ограничения на количество хранимых записей.

## 3. Ключевые поля и концепции

- `entries`: Список сохраненных назначений платежей, каждый из которых является экземпляром `PaymentDestination`.
- `limit`: Опциональное поле, содержащее правила лимитов.

### Концепция опциональных лимитов

Поле `limit` и его вложенные поля (`total`, `per_type`) являются опциональными (`optional`). Это ключевая особенность, которая интерпретируется следующим образом:

- **Если поле `limit` или любое из его вложенных полей отсутствует (пусто), это означает, что соответствующее ограничение не применяется.**

Это правило распространяется и на поле `value` в `PerType`. Таким образом, существует два способа указать на отсутствие лимита для конкретного типа:
- Полное отсутствие объекта `PerType` для данного типа в списке `per_type`.
- Наличие объекта `PerType`, но с пустым (неустановленным) полем `value`.
Оба варианта должны интерпретироваться как "нет лимита для данного типа".

### Примеры:
- Если `limit` не задан, пользователь может хранить неограниченное количество любых назначений.
- Если `limit.total` не задан, но заданы лимиты `per_type`, то нет общего ограничения, но есть ограничения по каждому типу.
- Если `limit.total` задан, а `per_type` — нет, то действует только общее ограничение на количество записей.

## 4. Сценарии использования

- **VIP-пользователь**: Для такого пользователя поле `limit` может быть не задано, что дает ему возможность сохранять любое количество назначений платежей.
- **Стандартный пользователь**: `limit` может быть установлен со значением `total = 5` и `per_type` лимитом в `value = 2` для типа `BLOCKCHAIN` (из `PaymentDestination.InstrumentType.Id`). Это означает, что пользователь может сохранить не более 5 назначений в сумме и не более 2 из них могут быть для блокчейн-адресов.

## 5. Связи с другими моделями

- **`PaymentDestination`**: `PaymentDestinationRegistry` **содержит** список `PaymentDestination`.