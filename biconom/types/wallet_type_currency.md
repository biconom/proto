# Модель: WalletTypeCurrency

## 1. Описание

**`WalletTypeCurrency`** — это связующая модель, которая определяет, доступна ли конкретная `Currency` в определенном `WalletType`, и задает для этой связки индивидуальные правила и ограничения.

Она является вторым уровнем конфигурации после `WalletType` и позволяет точечно настраивать поведение каждой валюты внутри типа кошелька.

## 2. Назначение и решаемые задачи

Основная цель — гранулярное управление валютами в рамках типов кошельков.

### Ключевые задачи:
- **Управление доступностью**: Позволяет включить или отключить (`disabled`) конкретную валюту в типе кошелька. Например, временно отключить депозиты USDT в спотовом кошельке.
- **Точечное ограничение операций**: Поле `disabled_operations_flags` позволяет запретить определенные операции (например, вывод) для конкретной валюты, не затрагивая другие валюты в том же типе кошелька.
- **Настройка правил переводов**: Вложенная модель `InternalTransferSettings` позволяет задавать индивидуальные лимиты (`min_amount`, `max_amount`) и комиссии (`outgoing_fee`) для внутренних переводов по каждой валюте.

## 3. Сценарии использования

- **Отключение валюты**: Администратор устанавливает `disabled = true` для `WalletTypeCurrency` (SPOT, SHIB), чтобы временно приостановить все операции с Shiba Inu в спотовых кошельках.
- **Запрет вывода**: Для бонусной валюты "BONUS" в кошельке "BONUS_WALLET" устанавливается флаг `WITHDRAW` в `disabled_operations_flags`, чтобы пользователи могли тратить бонусы внутри системы, но не могли их выводить.
- **Комиссия за перевод**: Для USDT в спотовом кошельке настраивается `internal_transfer_settings.outgoing_fee` для взимания небольшой комиссии за внутренние переводы между пользователями.

## 4. Связи с другими моделями

- **`WalletType`**: `WalletTypeCurrency` ссылается на `WalletType` через `id.wallet_type_id`.
- **`Currency`**: `WalletTypeCurrency` ссылается на `Currency` через `id.currency_id`.
- **`WalletOperation`**: Логически использует `WalletOperation.Id` для определения битов в `disabled_operations_flags`.
- **`CalculationGroup`**: Встраивает эту модель для описания правил расчета комиссий за перевод.