syntax = "proto3";

package biconom.types;

// 'Chart' представляет собой единую сущность графика для аналитического отчета.
// Эта модель является полиморфной и может содержать данные
// как для денежных, так и для числовых типов графиков.
message Chart {

  // 'List' представляет собой обертку для списка графиков.
  message List {
    repeated Chart items = 1;
  }

  // 'Monetary' определяет структуру данных для графика с денежными значениями.
  message Monetary {
    
    // 'Candle' представляет единичный элемент данных (свечу) для денежного графика.
    message Candle {
      // Временная метка начала интервала агрегации (Unix timestamp, uint32).
      uint32 timestamp_start = 1;
      // Временная метка окончания интервала агрегации (Unix timestamp, uint32).
      uint32 timestamp_end = 2;
      // Строковое представление значения для обеспечения высокой точности (например, "123.456").
      string value = 3;
    }

    // Числовой идентификатор валюты (uint32).
    uint32 currency_id = 1;
    // Набор данных (свечей) для этого графика.
    repeated Candle candles = 2;
  }

  // 'Numeric' определяет структуру данных для графика со числовыми значениями.
  message Numeric {
    
    // 'Candle' представляет единичный элемент данных (свечу) для числового графика.
    message Candle {
      // Временная метка начала интервала агрегации (Unix timestamp, uint32).
      uint32 timestamp_start = 1;
      // Временная метка окончания интервала агрегации (Unix timestamp, uint32).
      uint32 timestamp_end = 2;
      // Значение со знаком (int64).
      int64 value = 3;
    }

    // Набор данных (свечей) для этого графика.
    repeated Candle candles = 1;
  }
  
  // Логическое имя (идентификатор) графика, (например, "income", "registrations").
  // Используется клиентом для группировки или идентификации.
  string chart_name = 1;

  // 'data_type' обеспечивает полиморфизм данных, позволяя графику 
  // содержать либо денежные, либо числовые данные.
  oneof data_type {
    Monetary monetary_data = 2;
    Numeric numeric_data = 3;
  }
}